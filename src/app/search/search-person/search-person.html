<section class="search-person">
  <ng-container *ngIf="loadingSearchPerson">
    <app-loading-fullscreen message="Searching..."></app-loading-fullscreen>
  </ng-container>
  <ng-container *ngIf="!loadingSearchPerson">
    <header #header>
      <h1>
        <fa-icon [icon]="searchIcon"></fa-icon>
        Search Person
      </h1>
      <h2>
        <fa-icon [icon]="userIcon"></fa-icon>
        {{ searchQuery }}
      </h2>
    </header>
    <main>
      <div class="container-fluid">
        <ng-container *ngIf="searchError">
          <app-search-error [errorMessage]="errorMessage" (reload)="searchPerson()">
          </app-search-error>
        </ng-container>
        <ng-container *ngIf="!searchError">
          <ng-container *ngIf="noResults">
            <section class="search-person-no-results">
              <p>
                <strong>{{ searchQuery }}</strong> returned no results.
              </p>
            </section>
          </ng-container>
          <ng-container *ngIf="!noResults">
            <section class="search-person-controls">
              <app-display-selector
                [displayMode]="displayMode"
                (onDisplayChange)="changeDisplay($event)"
              >
              </app-display-selector>
            </section>
            <section class="search-person-results">
              <p>
                <strong>{{ searchQuery }}</strong> returned {{ totalResults }} results. Showing
                results {{ currentPageStart }}-{{ currentPageEnd }} of {{ totalResults }}:
              </p>
              <ng-container *ngIf="displayMode == 'grid'">
                <section class="search-person-results-grid">
                  <div class="row">
                    <ng-container
                      *ngFor="
                        let personResult of personResults
                          | paginate
                            : {
                                itemsPerPage: 20,
                                currentPage: currentPage,
                                totalItems: totalResults
                              }
                      "
                    >
                      <div class="col-12 col-sm-6 col-lg-3">
                        <app-search-person-result-grid [personResult]="personResult">
                        </app-search-person-result-grid>
                      </div>
                    </ng-container>
                  </div>
                </section>
              </ng-container>
              <ng-container *ngIf="displayMode == 'list'">
                <section class="search-person-results-list">
                  <div class="row">
                    <ng-container
                      *ngFor="
                        let personResult of personResults
                          | paginate
                            : {
                                itemsPerPage: 20,
                                currentPage: currentPage,
                                totalItems: totalResults
                              }
                      "
                    >
                      <app-search-person-result-list [personResult]="personResult">
                      </app-search-person-result-list>
                    </ng-container>
                  </div>
                </section>
              </ng-container>
              <div class="d-flex justify-content-center align-items-center">
                <pagination-controls (pageChange)="changePage($event)"></pagination-controls>
              </div>
            </section>
          </ng-container>
        </ng-container>
      </div>
    </main>
  </ng-container>
</section>
